<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Domain Module | Smile</title>
    <meta name="description" content="A Platform for building Enterprise Application.">
    <link rel="shortcut icon" type="image/x-icon" href="/doc-smile/docs/icon/favicon-96x96.png">
    
    <link rel="preload" href="/doc-smile/docs/assets/css/0.styles.bddf2508.css" as="style"><link rel="preload" href="/doc-smile/docs/assets/js/app.36cc31ef.js" as="script"><link rel="preload" href="/doc-smile/docs/assets/js/10.53a6fb8d.js" as="script"><link rel="prefetch" href="/doc-smile/docs/assets/js/25.118d3b04.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/1.63391fc4.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/2.7123220c.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/3.f19ac0cc.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/4.21859165.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/5.cb607faf.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/6.ad49ce19.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/7.ff894bf8.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/8.c3298bd1.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/9.b06641e4.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/11.37127f44.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/12.b3bd6ff0.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/13.168501e5.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/14.bf49f377.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/15.2a6a6789.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/16.ab73da4a.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/17.63afd0c9.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/18.64613603.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/19.df7df6f7.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/20.5c7dd2f1.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/21.7b5989c6.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/22.5fdda26f.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/23.336783b0.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/24.259db94c.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/26.238c784d.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/27.056d4d43.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/28.76a26084.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/29.ffbdc766.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/30.4f97ebb3.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/31.dc09e694.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/32.137a5787.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/33.bfe27dc0.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/34.b8be6d99.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/35.667916e8.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/36.f8a731ba.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/37.33a2b4e2.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/38.72a5495c.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/39.cecdd1f1.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/40.a2e55a06.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/41.461e4a88.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/42.3e8ff50d.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/43.1599ab27.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/44.9da6b0ab.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/45.c086a22b.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/46.af3608f4.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/47.9235a85f.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/48.be0baf33.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/49.bec51a39.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/50.a93d4a95.js"><link rel="prefetch" href="/doc-smile/docs/assets/js/51.6d60543f.js">
    <link rel="stylesheet" href="/doc-smile/docs/assets/css/0.styles.bddf2508.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/doc-smile/docs/" class="home-link router-link-active"><img src="/doc-smile/docs/smile_logo.png" class="logo"><span class="site-name can-hide">
      Smile
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/doc-smile/docs/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/doc-smile/docs/examples/" class="nav-link">Examples</a></div><div class="nav-item"><a href="/doc-smile/docs/cookbook/" class="nav-link">Cookbook</a></div><div class="nav-item"><a href="/doc-smile/docs/training/" class="nav-link router-link-active">Training</a></div><div class="nav-item"><a href="/doc-smile/docs/ecosystem/" class="nav-link">Ecosystem</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/doc-smile/docs/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/doc-smile/docs/examples/" class="nav-link">Examples</a></div><div class="nav-item"><a href="/doc-smile/docs/cookbook/" class="nav-link">Cookbook</a></div><div class="nav-item"><a href="/doc-smile/docs/training/" class="nav-link router-link-active">Training</a></div><div class="nav-item"><a href="/doc-smile/docs/ecosystem/" class="nav-link">Ecosystem</a></div><!----></nav><ul class="sidebar-links"><li><a href="/doc-smile/docs/training/smile-training/" class="sidebar-link">Smile Training</a></li><li><a href="/doc-smile/docs/training/smile-training/smile-modules-overview.html" class="sidebar-link">Smile Modules Overview</a></li><li><a href="/doc-smile/docs/training/smile-training/data-module.html" class="sidebar-link">Data Module</a></li><li><a href="/doc-smile/docs/training/smile-training/mongo-setup.html" class="sidebar-link">Mongo Setup</a></li><li><a href="/doc-smile/docs/training/smile-training/mongo-module.html" class="sidebar-link">Mongo Module</a></li><li><a href="/doc-smile/docs/training/smile-training/domain-module.html" class="active sidebar-link">Domain Module</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc-smile/docs/training/smile-training/domain-module.html#what-is-the-need-for-a-domain-module" class="sidebar-link">What is the need for a domain module?</a></li><li class="sidebar-sub-header"><a href="/doc-smile/docs/training/smile-training/domain-module.html#creating-a-domain-module" class="sidebar-link">Creating a domain module</a></li><li class="sidebar-sub-header"><a href="/doc-smile/docs/training/smile-training/domain-module.html#defining-a-command" class="sidebar-link">Defining a command</a></li><li class="sidebar-sub-header"><a href="/doc-smile/docs/training/smile-training/domain-module.html#safe-guard-your-commands-with-preconditions" class="sidebar-link">Safe-guard your commands with preconditions</a></li><li class="sidebar-sub-header"><a href="/doc-smile/docs/training/smile-training/domain-module.html#using-domain-logic-functions-in-pre-condition" class="sidebar-link">Using domain-logic functions in pre-condition</a></li><li class="sidebar-sub-header"><a href="/doc-smile/docs/training/smile-training/domain-module.html#defining-post-conditions-for-testing" class="sidebar-link">Defining post conditions for testing</a></li><li class="sidebar-sub-header"><a href="/doc-smile/docs/training/smile-training/domain-module.html#invoking-a-command-from-outside" class="sidebar-link">Invoking a command from outside</a></li><li class="sidebar-sub-header"><a href="/doc-smile/docs/training/smile-training/domain-module.html#command-testing-using-fixtures" class="sidebar-link">Command testing using fixtures</a></li><li class="sidebar-sub-header"><a href="/doc-smile/docs/training/smile-training/domain-module.html#testing-the-pre-conditions" class="sidebar-link">Testing the pre-conditions</a></li></ul></li><li><a href="/doc-smile/docs/training/smile-training/play-module.html" class="sidebar-link">Play Module</a></li><li><a href="/doc-smile/docs/training/smile-training/vue/" class="sidebar-link">Vue Training</a></li><li><a href="/doc-smile/docs/training/smile-training/gompa-module.html" class="sidebar-link">Gompa Module</a></li></ul></div><div class="page"><div class="content"><h1 id="domain-module"><a href="#domain-module" aria-hidden="true" class="header-anchor">#</a> Domain Module</h1><h2 id="what-is-the-need-for-a-domain-module"><a href="#what-is-the-need-for-a-domain-module" aria-hidden="true" class="header-anchor">#</a> What is the need for a domain module?</h2><p>Domain module that defines the building blocks of the project. It has the actual operations that are needed to run the business.</p><ol><li>Separating the read from the write, binds the specific concerns with clear boundaries. Read about CQRS to know more. https://martinfowler.com/bliki/CQRS.html</li><li>Thereby, enables us to write bug free, high quality code by ensuring that the writes are guarded well.</li><li>What is a bounded context?</li></ol><h2 id="creating-a-domain-module"><a href="#creating-a-domain-module" aria-hidden="true" class="header-anchor">#</a> Creating a domain module</h2><ol><li>Open Mould.ksmile file and add the domain module definition as follows</li></ol><div class="language- extra-class"><pre class="language-text"><code>section learning {
	data-module LearningData at com.metastay.learningdata
	mongo-module LearningMongo(LearningData) at com.metastay.leaningmongo
	domain-module LearningDomain(LearningMongo) at com.metastay.learningdomain
}
</code></pre></div><ol start="2"><li>Run smile command in sbt</li><li>refresh the project in eclipse.</li><li>You will see the <code>LearningDomain.kdomain</code> file generated.</li></ol><h2 id="defining-a-command"><a href="#defining-a-command" aria-hidden="true" class="header-anchor">#</a> Defining a command</h2><ol><li>Open LearningDomain.kdomain in eclipse</li><li>Create a command set (bounded-context) for Company apis &amp; with it, define a command to create/register a new company.</li></ol><div class="language- extra-class"><pre class="language-text"><code>command-set Company {
		command registerCompany{
		input(companyName:String, address:String)
		output(companyId:Id)
	}
}
</code></pre></div><ol start="3"><li>Compile the code in sbt</li><li>Open intelliJ and you should see a file by name CompanyCommandSetCode.scala generated with a method registerCompany defined and ready to be implemented.</li></ol><div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> CompanyCommandSetCode<span class="token punctuation">(</span>domainLogicRef<span class="token operator">:</span>DomainLogicRef<span class="token punctuation">)</span> <span class="token keyword">extends</span> CompanyCommandSetCommands <span class="token punctuation">{</span>
     <span class="token keyword">override</span> <span class="token keyword">def</span> registerCompany <span class="token operator">=</span> RegisterCompanyCommand <span class="token punctuation">{</span>
        <span class="token keyword">import</span> RegisterCompanyCommand<span class="token punctuation">.</span>_
        input<span class="token operator">:</span> Input <span class="token keyword">=&gt;</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token comment">// Output()</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>Implement the command: copy the code written in LearningMongoObject class's createCompany api and change it as follows:</li></ol><div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">override</span> <span class="token keyword">def</span> registerCompany <span class="token operator">=</span> RegisterCompanyCommand <span class="token punctuation">{</span>
 <span class="token keyword">import</span> RegisterCompanyCommand<span class="token punctuation">.</span>_
 input<span class="token operator">:</span> Input <span class="token keyword">=&gt;</span>
   <span class="token keyword">val</span> companyId <span class="token operator">=</span> <span class="token keyword">new</span> Id
   <span class="token keyword">val</span> companyRow <span class="token operator">=</span> CompanyRow<span class="token punctuation">(</span>
     name <span class="token operator">=</span> input<span class="token punctuation">.</span>companyName<span class="token punctuation">,</span>
     address <span class="token operator">=</span> input<span class="token punctuation">.</span>address
   <span class="token punctuation">)</span>
   CompanyWriter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>insert<span class="token punctuation">(</span>companyRow<span class="token punctuation">)</span>
   Output<span class="token punctuation">(</span>companyId <span class="token operator">=</span> companyId<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="safe-guard-your-commands-with-preconditions"><a href="#safe-guard-your-commands-with-preconditions" aria-hidden="true" class="header-anchor">#</a> Safe-guard your commands with preconditions</h2><ol><li>Open LearningDomain.kdomain file in eclipse</li><li>Add a check on companyName's length during registration</li></ol><div class="language- extra-class"><pre class="language-text"><code>command registerCompany{
		input(companyName:String, address:String)
		pre {
			condition companyNameValid =&gt; `input.companyName.length &gt;= 5` 
				failing &quot;Company name must have at least 5 characters&quot;
		}
		output(companyId:Id)
	}
</code></pre></div><ol start="3"><li>Ensure the code compiles.</li></ol><h2 id="using-domain-logic-functions-in-pre-condition"><a href="#using-domain-logic-functions-in-pre-condition" aria-hidden="true" class="header-anchor">#</a> Using domain-logic functions in pre-condition</h2><ol><li><p>Add a check to ensure the company is not already registered:</p><ul><li>Open <code>LearningDomain.kdomain</code> file in eclipse</li><li>Define a <strong>domain-logic</strong> &amp; a <strong>function companyNameExists</strong></li></ul></li></ol><div class="language- extra-class"><pre class="language-text"><code>domain-logic Company {
	function companyNameExist(name:String):Boolean
}
</code></pre></div><ul><li>Define a <strong>domain-ref</strong> inside the command set <strong>Company</strong></li></ul><div class="language- extra-class"><pre class="language-text"><code>command-set Company {
	domain-logic-ref companyDomainRef:Company
	command registerCompany{...}
}
</code></pre></div><ul><li>Add the check in the command</li></ul><div class="language- extra-class"><pre class="language-text"><code>command registerCompany{
	input(companyName:String, address:String)
		pre {
		  	condition companyNameValid =&gt; `input.companyName.length &gt;= 5` failing &quot;Company name must have at least 5 characters&quot;
	  		condition companyNameMustBeUnique =&gt; !companyDomainRef.companyNameExist(input.companyName) failing &quot;Company is already registered&quot;
		}
	output(companyId:Id) 
}
</code></pre></div><ul><li>Ensure the code compiles.</li><li>Implement the domain logic function
a.	Open the domain logic code file in intelliJ - <code>CompanyDomainLogicCode.scala</code>
b.	implement companyNameExist method</li></ul><div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> CompanyDomainLogicCode <span class="token keyword">extends</span> CompanyDomainLogic <span class="token punctuation">{</span>
	<span class="token keyword">override</span> <span class="token keyword">def</span> companyNameExist<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token operator">=</span> CompanyQuery<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span>equalsIgnoreCase<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span>exists
<span class="token punctuation">}</span>
</code></pre></div><h2 id="defining-post-conditions-for-testing"><a href="#defining-post-conditions-for-testing" aria-hidden="true" class="header-anchor">#</a> Defining post conditions for testing</h2><ol><li>Open <code>LearningDomain.kdomain</code> file in eclipse</li><li>Add a check to ensure the company got registered</li></ol><div class="language- extra-class"><pre class="language-text"><code>command registerCompany{
input(companyName:String, address:String)
pre {
	 condition companyNameValid =&gt; `input.companyName.length &gt;= 5` failing &quot;Company name must have at least 5 characters&quot;
	 condition companyNameMustBeUnique =&gt; !companyDomainRef.companyNameExist(input.companyName) failing &quot;Company is already registered&quot;
	}
	output(companyId:Id)
	post {
	 condition companyRegistered =&gt; companyDomainRef.companyNameExist(input.companyName) failing &quot;Company not registered&quot;
	}
}
</code></pre></div><h2 id="invoking-a-command-from-outside"><a href="#invoking-a-command-from-outside" aria-hidden="true" class="header-anchor">#</a> Invoking a command from outside</h2><ol><li>In order call a command, you need to grab the commandSet and then call the command. Use the Now() variant of the command to start with.</li><li>Open file <code>LearningDomainTestSuite</code> and call the command from the test case as follows:</li></ol><div class="language-scala extra-class"><pre class="language-scala"><code><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span> HEAD
<span class="token keyword">class</span> LearningDomainTestSuite <span class="token keyword">extends</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">{</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
<span class="token keyword">class</span> LearningDomainTestSuite <span class="token keyword">extends</span> <span class="token punctuation">{</span>
<span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">68</span>a8b60e0f359e256d7582f2d291872fe0fad08e
	test<span class="token punctuation">(</span><span class="token string">&quot;call command&quot;</span><span class="token punctuation">,</span> Tag<span class="token punctuation">(</span><span class="token string">&quot;register&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		println<span class="token punctuation">(</span><span class="token string">&quot;Calling registerCompany command...&quot;</span><span class="token punctuation">)</span>
		<span class="token keyword">val</span> output <span class="token operator">=</span>  grab<span class="token punctuation">[</span>CompanyCommandSet<span class="token punctuation">]</span><span class="token punctuation">.</span>registerCompanyNow<span class="token punctuation">(</span>companyName <span class="token operator">=</span> <span class="token string">&quot;I3 Software Pvt Lab&quot;</span><span class="token punctuation">,</span> address <span class="token operator">=</span> <span class="token string">&quot;HSR, Bangalore&quot;</span><span class="token punctuation">)</span>
		assert<span class="token punctuation">(</span>output<span class="token punctuation">.</span>isSuccess<span class="token punctuation">)</span>
		output<span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token string">&quot;Command Output: &quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>Run the test &amp; check if the company has got created in the database</li></ol><h2 id="command-testing-using-fixtures"><a href="#command-testing-using-fixtures" aria-hidden="true" class="header-anchor">#</a> Command testing using fixtures</h2><ol><li>Open the command fixture test suite in intelliJ: <code>RegisterCompanyCommandTestSuite</code></li><li>Write a test to ensure successful creation of a company</li></ol><div class="language-scala extra-class"><pre class="language-scala"><code>test<span class="token punctuation">(</span><span class="token string">&quot;register a new company&quot;</span><span class="token punctuation">,</span> Tag<span class="token punctuation">(</span><span class="token string">&quot;register-new&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	 grab<span class="token punctuation">[</span>RegisterCompanyCommandFixture<span class="token punctuation">]</span>
	   <span class="token punctuation">.</span>checker<span class="token punctuation">(</span>Input<span class="token punctuation">(</span><span class="token string">&quot;New Company&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;India&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	   <span class="token punctuation">.</span>expectPostPass
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>Run the test in sbt</li></ol><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>LearningDomain<span class="token punctuation">]</span> test-only *RegisterCompanyCommandTestSuite -- -n register-new
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> RegisterCompanyCommandTestSuite:
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> - register a new company
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> ScalaTest
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> Run completed <span class="token keyword">in</span> 1 second, 501 milliseconds.
</code></pre></div><ol start="4"><li>If you run the test again it will fail since the company got created in the db from the earlier test case, so you must clean the db for every test run</li><li>Dropping the collection before each test is run:</li></ol><ul><li>Add the following code to your test suite:</li></ul><div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">override</span> <span class="token keyword">def</span> beforeEach<span class="token punctuation">(</span>testData<span class="token operator">:</span> TestData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	 <span class="token keyword">super</span><span class="token punctuation">.</span>beforeEach<span class="token punctuation">(</span>testData<span class="token punctuation">)</span>
	 CompanyWriter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">note</p><p>alternately you can also override afterEach method for the same.</p></div><ol start="6"><li>Now you can run the test any number of times without failure as the company collection gets cleared before each test run.</li></ol><h2 id="testing-the-pre-conditions"><a href="#testing-the-pre-conditions" aria-hidden="true" class="header-anchor">#</a> Testing the pre-conditions</h2><ol><li>Verify if the command fails when we try to register with a name less than 5 characters</li></ol><div class="language-scala extra-class"><pre class="language-scala"><code>test<span class="token punctuation">(</span><span class="token string">&quot;create a company with invalid name&quot;</span><span class="token punctuation">,</span> Tag<span class="token punctuation">(</span><span class="token string">&quot;invalid-name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	 <span class="token keyword">val</span> companyName <span class="token operator">=</span> <span class="token string">&quot;New&quot;</span>
	 grab<span class="token punctuation">[</span>RegisterCompanyCommandFixture<span class="token punctuation">]</span>
	   <span class="token punctuation">.</span>checker<span class="token punctuation">(</span>Input<span class="token punctuation">(</span>companyName<span class="token punctuation">,</span> <span class="token string">&quot;India&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	   <span class="token punctuation">.</span>expectPreFailOnly<span class="token punctuation">(</span><span class="token string">&quot;companyNameValid&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>Run the test case</li></ol><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>LearningDomain<span class="token punctuation">]</span> test-only *RegisterCompanyCommandTestSuite -- -n invalid-name
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> RegisterCompanyCommandTestSuite:
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> - create a company with invalid name
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> ScalaTest
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> Run completed <span class="token keyword">in</span> 1 second, 31 milliseconds.
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> Total number of tests run: 1
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> Suites: completed 1, aborted 0
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> Tests: succeeded 1, failed 0, canceled 0, ignored 0, pending 0
<span class="token punctuation">[</span>info<span class="token punctuation">]</span> All tests passed.

</code></pre></div></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/doc-smile/docs/training/smile-training/mongo-module.html" class="prev">
          Mongo Module
        </a></span><span class="next"><a href="/doc-smile/docs/training/smile-training/play-module.html">
          Play Module
        </a> →
      </span></p></div></div></div></div>
    <script src="/doc-smile/docs/assets/js/10.53a6fb8d.js" defer></script><script src="/doc-smile/docs/assets/js/app.36cc31ef.js" defer></script>
  </body>
</html>
