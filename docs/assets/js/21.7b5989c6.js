(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{197:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"gompa-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gompa-module","aria-hidden":"true"}},[t._v("#")]),t._v(" Gompa Module")]),s("h2",{attrs:{id:"what-is-a-gompa-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-is-a-gompa-module","aria-hidden":"true"}},[t._v("#")]),t._v(" What is a gompa module?")]),s("p",[t._v("Gompa module is a component that allows easy implementation of authentication and authorization of user and user groups.")]),s("h2",{attrs:{id:"adding-a-gompa-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-a-gompa-module","aria-hidden":"true"}},[t._v("#")]),t._v(" Adding a gompa module:")]),s("ol",[s("li",[t._v("We will use our existing project to add gompa module.")]),s("li",[t._v("Go to the project directory and sbt")])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("~$ cd library/\n~/library$ sbt\n[Library] $ add-component gompa-release-0.14\n")])])]),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),s("ol",[s("li",[t._v("see to that smile version is 3.4.1 or higher.\nTo check smile version"),s("br"),t._v("\n~$ smile --version")]),s("li",[t._v("check if folder named gompa-release-0.14 exists in ./smile-3.4.1/component")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Import the component to Eclipse and add the import-component to "),s("code",[t._v("library.ksmile")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import-component gompa-release-0.14(GompaApp,LoginApp)\nsection library {\n\tvue-module/0.2 LibraryApp(LibraApi,ButerVue,GompaApi) at com.metastay.libraryapp\n}\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("smile")])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ smile\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[s("p",[t._v("Import the downloaded Libra component to eclipse.")])]),s("li",[s("p",[t._v("Go to project/"),s("code",[t._v("libraryapp-shell.html")]),t._v(" and uncomment the below lines and update the first line.")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<script>\n    var loggedInUser = window.localStorage.getItem(\"loggedInUser\")\n    var redirectPath = window.location.pathname;\n    var appId = \"LibraryApp\";\n    if(!loggedInUser){\n        window.location.href = '/login#/'+appId+'?redirectUrl='+redirectPath ;\n    }\n<\/script>\n")])])]),s("h2",{attrs:{id:"authentication-of-user"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authentication-of-user","aria-hidden":"true"}},[t._v("#")]),t._v(" Authentication of user")]),s("p",[t._v("1.video\\")]),s("h2",{attrs:{id:"displaying-userdetails-after-logging-in"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#displaying-userdetails-after-logging-in","aria-hidden":"true"}},[t._v("#")]),t._v(" Displaying userDetails after logging in")]),s("p",[t._v("2.Add data user to "),s("code",[t._v("libraryApp.kvue")])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" data User (userId:String, userName:String, emailId: String,title: String?,\n  firstName: String, lastName: String?, fullName: String, mobile: String?, \n  active: Boolean)\n")])])]),s("p",[t._v("3)Add actions user to "),s("code",[t._v("libraryApp.kvue")])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("actions User{\n\tgetUserDetails\n}\n")])])]),s("p",[t._v("4)Update store in "),s("code",[t._v("libraryApp.kvue")])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("store {\n        state (\n                recentBooks: Book*,\n                loggedInUser:User\n               )\n\t\tmutations Book {\n                mutateRecentBooks(recentBooks: Book*)\n                mutateUser(user:User)\n        \t\t}\n}\n")])])]),s("p",[t._v("5)Add backend-reader to "),s("code",[t._v("libraryApp.kvue")])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" backend-reader User GompaApi::User\n")])])]),s("p",[t._v("6)Go "),s("code",[t._v("BookMutationsCode.scala")]),t._v(" and add the below function.")]),s("div",{staticClass:"language-scala extra-class"},[s("pre",{pre:!0,attrs:{class:"language-scala"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" mutateUser"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("State"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" User"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token builtin"}},[t._v("Unit")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("loggedInUser"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        state"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loggedInUser "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" loggedInUser\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("7)Go to "),s("code",[t._v("UserActionCode.scala")]),t._v(" and add the below code")]),s("div",{staticClass:"language-scala extra-class"},[s("pre",{pre:!0,attrs:{class:"language-scala"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("object")]),t._v(" UserActionsCode "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" getUserDetails"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Store"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token builtin"}},[t._v("String")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token builtin"}},[t._v("Unit")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("userName"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tUserReaderBackend"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getUserDetails"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GetUserDetails"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Input"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userName"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onSuccess "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Right"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("output"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("val")]),t._v(" user "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("  User"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fromDynamic"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("output"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toJson"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n       \n      "),s("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Left"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" handleErrorMessage"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" handleErrorMessage"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" ErrorResponse"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  error "),s("span",{attrs:{class:"token keyword"}},[t._v("match")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" ClientErrors"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" Toastr"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("map"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mkString"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"\\n"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" ClientExceptions"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" Toastr"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"Error : "')]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" list"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("map"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mkString"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"\\n"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" Forbidden"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reason"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" Toastr"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"You are not Authorized"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" Unauthorized"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reason"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" Toastr"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"You are not Authorized"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" ServerError"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reason"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" ServerTimeout"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reason"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" Toastr"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"Server is not responding; Try again later"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" OtherResponse"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reason"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" statusCode"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" _ "),s("span",{attrs:{class:"token keyword"}},[t._v("=>")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"8"}},[s("li")])])}],!1,null,null,null);a.default=e.exports}}]);